<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Infection Simulation &mdash; pop2net 0.1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/nbsphinx-code-cells.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=01f34227"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pop2net
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About Pop2net</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section_introduction.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section_examples.html">Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers.html">Notes to Developers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pop2net</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Infection Simulation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/infection_simulation.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Infection-Simulation">
<h1>Infection Simulation<a class="headerlink" href="#Infection-Simulation" title="Link to this heading">ÔÉÅ</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">import</span> <span class="nn">pop2net</span> <span class="k">as</span> <span class="nn">p2n</span>
<span class="kn">from</span> <span class="nn">pop2net.data_fakers.soep</span> <span class="kn">import</span> <span class="n">soep_faker</span>
<span class="kn">from</span> <span class="nn">pop2net.pop_maker</span> <span class="kn">import</span> <span class="n">PopMaker</span>
<span class="kn">import</span> <span class="nn">pop2net.utils</span> <span class="k">as</span> <span class="nn">utils</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Agent</span><span class="p">(</span><span class="n">p2n</span><span class="o">.</span><span class="n">Agent</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">=</span> <span class="s2">&quot;susceptible&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">days_since_infection</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">infect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">infection_status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;infectious&quot;</span><span class="p">,</span> <span class="s2">&quot;symptomatic&quot;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">agent_v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">neighbors</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">agent_v</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">==</span> <span class="s2">&quot;susceptible&quot;</span><span class="p">:</span>
                    <span class="n">contact_weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contact_weight</span><span class="p">(</span><span class="n">agent_v</span><span class="p">)</span>
                    <span class="n">infection_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">infection_weight</span> <span class="o">*</span> <span class="n">contact_weight</span>

                    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">infection_probability</span><span class="p">:</span>
                        <span class="n">agent_v</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">=</span> <span class="s2">&quot;exposed&quot;</span>

    <span class="k">def</span> <span class="nf">update_infection_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">infection_status</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;exposed&quot;</span><span class="p">,</span> <span class="s2">&quot;infectious&quot;</span><span class="p">,</span> <span class="s2">&quot;symptomatic&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">days_since_infection</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="mi">2</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">days_since_infection</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">=</span> <span class="s2">&quot;infectious&quot;</span>

            <span class="k">elif</span> <span class="mi">6</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">days_since_infection</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">=</span> <span class="s2">&quot;symptomatic&quot;</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">days_since_infection</span> <span class="o">&gt;=</span> <span class="mi">11</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">=</span> <span class="s2">&quot;recovered&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Home</span><span class="p">(</span><span class="n">p2n</span><span class="o">.</span><span class="n">Location</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight_projection_denominator</span> <span class="o">=</span> <span class="mi">24</span>

    <span class="k">def</span> <span class="nf">group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">agent</span><span class="o">.</span><span class="n">hid</span>

    <span class="k">def</span> <span class="nf">weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>  <span class="c1"># noqa: ARG002</span>
        <span class="k">return</span> <span class="mi">8</span>


<span class="k">class</span> <span class="nc">Work</span><span class="p">(</span><span class="n">p2n</span><span class="o">.</span><span class="n">Location</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight_projection_denominator</span> <span class="o">=</span> <span class="mi">24</span>

    <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">agent</span><span class="o">.</span><span class="n">work_hours_day</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">agent</span><span class="o">.</span><span class="n">work_hours_day</span>


<span class="k">class</span> <span class="nc">School</span><span class="p">(</span><span class="n">p2n</span><span class="o">.</span><span class="n">Location</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">25</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight_projection_denominator</span> <span class="o">=</span> <span class="mi">24</span>

    <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">6</span> <span class="o">&lt;=</span> <span class="n">agent</span><span class="o">.</span><span class="n">age</span> <span class="o">&lt;=</span> <span class="mi">18</span>

    <span class="k">def</span> <span class="nf">weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># workday?</span>
        <span class="k">if</span> <span class="n">agent</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="c1"># not ill?</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">agent</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">!=</span> <span class="s2">&quot;symptomatic&quot;</span>
                <span class="ow">or</span> <span class="n">agent</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">==</span> <span class="s2">&quot;symptomatic&quot;</span>
                <span class="ow">and</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span>
            <span class="p">):</span>
                <span class="c1"># no holidays?</span>
                <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_timetable_entry</span><span class="p">()[</span><span class="s2">&quot;school&quot;</span><span class="p">]:</span>
                    <span class="n">weight</span> <span class="o">=</span> <span class="mi">6</span>

        <span class="k">return</span> <span class="n">weight</span>


<span class="k">class</span> <span class="nc">Friendship</span><span class="p">(</span><span class="n">p2n</span><span class="o">.</span><span class="n">Location</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight_projection_denominator</span> <span class="o">=</span> <span class="mi">24</span>

    <span class="k">def</span> <span class="nf">group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">age</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)),</span> <span class="n">agent</span><span class="o">.</span><span class="n">gender</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="k">if</span> <span class="n">agent</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="k">else</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">p2n</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">df_soep</span> <span class="o">=</span> <span class="n">soep_faker</span><span class="o">.</span><span class="n">soep</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">n_agents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pop_maker</span> <span class="o">=</span> <span class="n">PopMaker</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">locations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pop_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span>
            <span class="n">df</span><span class="o">=</span><span class="n">df_soep</span><span class="p">,</span>
            <span class="n">agent_class</span><span class="o">=</span><span class="n">Agent</span><span class="p">,</span>
            <span class="n">location_classes</span><span class="o">=</span><span class="p">[</span><span class="n">Home</span><span class="p">,</span> <span class="n">School</span><span class="p">,</span> <span class="n">Work</span><span class="p">,</span> <span class="n">Friendship</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infection_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
            <span class="n">agent</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">=</span> <span class="s2">&quot;exposed&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timetable</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span> <span class="p">{</span>
                <span class="s2">&quot;school&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span> <span class="p">{</span>
                <span class="s2">&quot;school&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span> <span class="p">{</span>
                <span class="s2">&quot;school&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="o">.</span><span class="n">update_infection_status</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="o">.</span><span class="n">infect</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">record</span><span class="p">(</span>
            <span class="s2">&quot;cumulative_infections&quot;</span><span class="p">,</span>
            <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span> <span class="k">if</span> <span class="n">agent</span><span class="o">.</span><span class="n">infection_status</span> <span class="o">!=</span> <span class="s2">&quot;susceptible&quot;</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="n">dt</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_timetable_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">date_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">timetable</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">date_key</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timetable</span><span class="p">[</span><span class="n">date_key</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">entry</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;steps&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">&quot;n_agents&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s2">&quot;infection_weight&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">Model</span><span class="o">.</span><span class="n">cumulative_infections</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Completed: 50 steps
Run time: 0:00:01.164945
Simulation finished
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;matplotlib.lines.Line2D at 0x286e4549c10&gt;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_infection_simulation_5_2.png" src="../_images/examples_infection_simulation_5_2.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">pop_maker</span><span class="o">.</span><span class="n">eval_affiliations</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


______________________________________
Number of agents per location
______________________________________

               n_agents
                  count       mean       std   min    25%   50%   75%   max
location_class
Friendship        545.0   1.937615  0.517841   0.0   2.00   2.0   2.0   3.0
Home              344.0   2.906977  1.339056   1.0   2.00   3.0   4.0   8.0
School              4.0  26.750000  0.500000  26.0  26.75  27.0  27.0  27.0
Work               41.0   9.902439  0.624695   6.0  10.00  10.0  10.0  10.0


______________________________________
Number of affiliated locations per agent
______________________________________

count    1000.000000
mean        2.569000
std         1.095646
min         1.000000
25%         2.000000
50%         2.000000
75%         3.000000
max         7.000000
Name: n_affiliated_locations, dtype: float64
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">agents</span><span class="p">:</span>
    <span class="n">agent</span><span class="o">.</span><span class="n">age_5</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">group_it</span><span class="p">(</span>
        <span class="n">agent</span><span class="o">.</span><span class="n">age</span><span class="p">,</span>
        <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">n_steps</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">return_value</span><span class="o">=</span><span class="s2">&quot;lower_bound&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">utils</span><span class="o">.</span><span class="n">create_contact_matrix</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">agents</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s2">&quot;age_5&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>5</th>
      <th>10</th>
      <th>15</th>
      <th>20</th>
      <th>25</th>
      <th>30</th>
      <th>35</th>
      <th>40</th>
      <th>45</th>
      <th>50</th>
      <th>55</th>
      <th>60</th>
      <th>65</th>
      <th>70</th>
      <th>75</th>
      <th>80</th>
      <th>85</th>
      <th>90</th>
      <th>95</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>95</th>
      <td>0.000</td>
      <td>0.003</td>
      <td>0.002</td>
      <td>0.005</td>
      <td>0.013</td>
      <td>0.016</td>
      <td>0.020</td>
      <td>0.009</td>
      <td>0.019</td>
      <td>0.015</td>
      <td>0.019</td>
      <td>0.016</td>
      <td>0.019</td>
      <td>0.014</td>
      <td>0.013</td>
      <td>0.015</td>
      <td>0.006</td>
      <td>0.018</td>
      <td>0.027</td>
      <td>0.024</td>
    </tr>
    <tr>
      <th>90</th>
      <td>0.001</td>
      <td>0.004</td>
      <td>0.004</td>
      <td>0.005</td>
      <td>0.017</td>
      <td>0.011</td>
      <td>0.011</td>
      <td>0.013</td>
      <td>0.018</td>
      <td>0.011</td>
      <td>0.016</td>
      <td>0.016</td>
      <td>0.026</td>
      <td>0.017</td>
      <td>0.012</td>
      <td>0.018</td>
      <td>0.010</td>
      <td>0.022</td>
      <td>0.028</td>
      <td>0.027</td>
    </tr>
    <tr>
      <th>85</th>
      <td>0.001</td>
      <td>0.008</td>
      <td>0.003</td>
      <td>0.008</td>
      <td>0.018</td>
      <td>0.016</td>
      <td>0.016</td>
      <td>0.016</td>
      <td>0.024</td>
      <td>0.022</td>
      <td>0.019</td>
      <td>0.013</td>
      <td>0.013</td>
      <td>0.011</td>
      <td>0.017</td>
      <td>0.013</td>
      <td>0.015</td>
      <td>0.028</td>
      <td>0.022</td>
      <td>0.018</td>
    </tr>
    <tr>
      <th>80</th>
      <td>0.001</td>
      <td>0.002</td>
      <td>0.006</td>
      <td>0.002</td>
      <td>0.013</td>
      <td>0.007</td>
      <td>0.006</td>
      <td>0.011</td>
      <td>0.012</td>
      <td>0.009</td>
      <td>0.017</td>
      <td>0.016</td>
      <td>0.013</td>
      <td>0.015</td>
      <td>0.015</td>
      <td>0.026</td>
      <td>0.024</td>
      <td>0.015</td>
      <td>0.010</td>
      <td>0.006</td>
    </tr>
    <tr>
      <th>75</th>
      <td>0.005</td>
      <td>0.008</td>
      <td>0.012</td>
      <td>0.003</td>
      <td>0.023</td>
      <td>0.013</td>
      <td>0.013</td>
      <td>0.010</td>
      <td>0.014</td>
      <td>0.012</td>
      <td>0.027</td>
      <td>0.019</td>
      <td>0.018</td>
      <td>0.028</td>
      <td>0.032</td>
      <td>0.026</td>
      <td>0.026</td>
      <td>0.013</td>
      <td>0.018</td>
      <td>0.015</td>
    </tr>
    <tr>
      <th>70</th>
      <td>0.003</td>
      <td>0.002</td>
      <td>0.007</td>
      <td>0.009</td>
      <td>0.022</td>
      <td>0.012</td>
      <td>0.023</td>
      <td>0.030</td>
      <td>0.034</td>
      <td>0.019</td>
      <td>0.024</td>
      <td>0.021</td>
      <td>0.035</td>
      <td>0.036</td>
      <td>0.058</td>
      <td>0.032</td>
      <td>0.015</td>
      <td>0.017</td>
      <td>0.012</td>
      <td>0.013</td>
    </tr>
    <tr>
      <th>65</th>
      <td>0.003</td>
      <td>0.004</td>
      <td>0.007</td>
      <td>0.005</td>
      <td>0.026</td>
      <td>0.021</td>
      <td>0.017</td>
      <td>0.027</td>
      <td>0.034</td>
      <td>0.021</td>
      <td>0.029</td>
      <td>0.032</td>
      <td>0.039</td>
      <td>0.050</td>
      <td>0.036</td>
      <td>0.028</td>
      <td>0.015</td>
      <td>0.011</td>
      <td>0.017</td>
      <td>0.014</td>
    </tr>
    <tr>
      <th>60</th>
      <td>0.000</td>
      <td>0.006</td>
      <td>0.008</td>
      <td>0.014</td>
      <td>0.025</td>
      <td>0.021</td>
      <td>0.037</td>
      <td>0.033</td>
      <td>0.040</td>
      <td>0.026</td>
      <td>0.036</td>
      <td>0.049</td>
      <td>0.056</td>
      <td>0.039</td>
      <td>0.035</td>
      <td>0.018</td>
      <td>0.013</td>
      <td>0.013</td>
      <td>0.026</td>
      <td>0.019</td>
    </tr>
    <tr>
      <th>55</th>
      <td>0.002</td>
      <td>0.010</td>
      <td>0.004</td>
      <td>0.009</td>
      <td>0.019</td>
      <td>0.016</td>
      <td>0.024</td>
      <td>0.027</td>
      <td>0.033</td>
      <td>0.023</td>
      <td>0.043</td>
      <td>0.048</td>
      <td>0.049</td>
      <td>0.032</td>
      <td>0.021</td>
      <td>0.019</td>
      <td>0.016</td>
      <td>0.013</td>
      <td>0.016</td>
      <td>0.016</td>
    </tr>
    <tr>
      <th>50</th>
      <td>0.001</td>
      <td>0.006</td>
      <td>0.005</td>
      <td>0.005</td>
      <td>0.030</td>
      <td>0.024</td>
      <td>0.020</td>
      <td>0.020</td>
      <td>0.046</td>
      <td>0.029</td>
      <td>0.068</td>
      <td>0.043</td>
      <td>0.036</td>
      <td>0.029</td>
      <td>0.024</td>
      <td>0.027</td>
      <td>0.017</td>
      <td>0.019</td>
      <td>0.016</td>
      <td>0.019</td>
    </tr>
    <tr>
      <th>45</th>
      <td>0.003</td>
      <td>0.000</td>
      <td>0.005</td>
      <td>0.010</td>
      <td>0.025</td>
      <td>0.021</td>
      <td>0.026</td>
      <td>0.032</td>
      <td>0.046</td>
      <td>0.038</td>
      <td>0.029</td>
      <td>0.023</td>
      <td>0.026</td>
      <td>0.021</td>
      <td>0.019</td>
      <td>0.012</td>
      <td>0.009</td>
      <td>0.022</td>
      <td>0.011</td>
      <td>0.015</td>
    </tr>
    <tr>
      <th>40</th>
      <td>0.001</td>
      <td>0.008</td>
      <td>0.002</td>
      <td>0.013</td>
      <td>0.023</td>
      <td>0.022</td>
      <td>0.038</td>
      <td>0.061</td>
      <td>0.084</td>
      <td>0.046</td>
      <td>0.046</td>
      <td>0.033</td>
      <td>0.040</td>
      <td>0.034</td>
      <td>0.034</td>
      <td>0.014</td>
      <td>0.012</td>
      <td>0.024</td>
      <td>0.018</td>
      <td>0.019</td>
    </tr>
    <tr>
      <th>35</th>
      <td>0.002</td>
      <td>0.004</td>
      <td>0.005</td>
      <td>0.007</td>
      <td>0.019</td>
      <td>0.023</td>
      <td>0.041</td>
      <td>0.034</td>
      <td>0.061</td>
      <td>0.032</td>
      <td>0.020</td>
      <td>0.027</td>
      <td>0.033</td>
      <td>0.027</td>
      <td>0.030</td>
      <td>0.010</td>
      <td>0.011</td>
      <td>0.016</td>
      <td>0.013</td>
      <td>0.009</td>
    </tr>
    <tr>
      <th>30</th>
      <td>0.003</td>
      <td>0.009</td>
      <td>0.007</td>
      <td>0.009</td>
      <td>0.029</td>
      <td>0.035</td>
      <td>0.042</td>
      <td>0.041</td>
      <td>0.038</td>
      <td>0.026</td>
      <td>0.020</td>
      <td>0.024</td>
      <td>0.037</td>
      <td>0.017</td>
      <td>0.023</td>
      <td>0.013</td>
      <td>0.006</td>
      <td>0.016</td>
      <td>0.011</td>
      <td>0.020</td>
    </tr>
    <tr>
      <th>25</th>
      <td>0.003</td>
      <td>0.004</td>
      <td>0.006</td>
      <td>0.009</td>
      <td>0.036</td>
      <td>0.026</td>
      <td>0.035</td>
      <td>0.023</td>
      <td>0.022</td>
      <td>0.021</td>
      <td>0.024</td>
      <td>0.016</td>
      <td>0.021</td>
      <td>0.021</td>
      <td>0.012</td>
      <td>0.013</td>
      <td>0.007</td>
      <td>0.016</td>
      <td>0.011</td>
      <td>0.016</td>
    </tr>
    <tr>
      <th>20</th>
      <td>0.004</td>
      <td>0.006</td>
      <td>0.010</td>
      <td>0.020</td>
      <td>0.028</td>
      <td>0.036</td>
      <td>0.029</td>
      <td>0.019</td>
      <td>0.023</td>
      <td>0.025</td>
      <td>0.030</td>
      <td>0.019</td>
      <td>0.025</td>
      <td>0.026</td>
      <td>0.022</td>
      <td>0.023</td>
      <td>0.013</td>
      <td>0.018</td>
      <td>0.017</td>
      <td>0.013</td>
    </tr>
    <tr>
      <th>15</th>
      <td>0.003</td>
      <td>0.235</td>
      <td>0.339</td>
      <td>0.178</td>
      <td>0.020</td>
      <td>0.009</td>
      <td>0.009</td>
      <td>0.007</td>
      <td>0.013</td>
      <td>0.010</td>
      <td>0.005</td>
      <td>0.009</td>
      <td>0.014</td>
      <td>0.005</td>
      <td>0.009</td>
      <td>0.003</td>
      <td>0.002</td>
      <td>0.008</td>
      <td>0.005</td>
      <td>0.005</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.015</td>
      <td>0.390</td>
      <td>0.498</td>
      <td>0.339</td>
      <td>0.010</td>
      <td>0.006</td>
      <td>0.007</td>
      <td>0.005</td>
      <td>0.002</td>
      <td>0.005</td>
      <td>0.005</td>
      <td>0.004</td>
      <td>0.008</td>
      <td>0.007</td>
      <td>0.007</td>
      <td>0.012</td>
      <td>0.006</td>
      <td>0.003</td>
      <td>0.004</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.018</td>
      <td>0.252</td>
      <td>0.390</td>
      <td>0.235</td>
      <td>0.006</td>
      <td>0.004</td>
      <td>0.009</td>
      <td>0.004</td>
      <td>0.008</td>
      <td>0.000</td>
      <td>0.006</td>
      <td>0.010</td>
      <td>0.006</td>
      <td>0.004</td>
      <td>0.002</td>
      <td>0.008</td>
      <td>0.002</td>
      <td>0.008</td>
      <td>0.004</td>
      <td>0.003</td>
    </tr>
    <tr>
      <th>0</th>
      <td>0.010</td>
      <td>0.018</td>
      <td>0.015</td>
      <td>0.003</td>
      <td>0.004</td>
      <td>0.003</td>
      <td>0.003</td>
      <td>0.002</td>
      <td>0.001</td>
      <td>0.003</td>
      <td>0.001</td>
      <td>0.002</td>
      <td>0.000</td>
      <td>0.003</td>
      <td>0.003</td>
      <td>0.005</td>
      <td>0.001</td>
      <td>0.001</td>
      <td>0.001</td>
      <td>0.000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_infection_simulation_7_1.png" src="../_images/examples_infection_simulation_7_1.png" />
</div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Marius Kaffai, Lukas Erhard.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>